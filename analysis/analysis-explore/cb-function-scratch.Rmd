---
title: "Working on functions"
author: "Clarissa"
date: "3/15/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(janitor)
library(lubridate)
library(sf)
library(tidycensus)
library(patchwork)
library(scales)
library(tmap)
library(vroom)

options(scipen = 999)
```


# Read in joined data

```{r}
# read in joined data
# data_ridb_acs_2018 <- vroom(file = "../../../../data_clean/2018_joined_data.csv",
#                             delim = ",")
test_df <- readRDS(file = "../../../../data_clean/2018_joined_data.rds")
```


```{r}
# test <- 
#   left_join(x = test_df %>% as.data.frame(),
#             y = test_zip_centroids %>% as.data.frame(), 
#             by = c("customer_zip" = "zip_code")) %>%
#   st_sf(sf_column_name = 'geometry.x') %>% 
#   mutate(distance_traveled_m = as.number(st_distance(x = geometry.x, 
#                                          y = geometry.y,
#                                          by_element = TRUE))) %>% 
#   as.data.frame() %>% 
#   extract(col = geometry.x, 
#           into = c('facility_latitude', 'facility_longitude'), 
#           regex = '\\((.*), (.*)\\)', 
#           convert = TRUE, remove = TRUE) %>% 
#   select(-geometry.y)

test <- data_combined_2018 %>% 
  mutate(distance_traveled_m = as.numeric(distance_traveled_m))
```






