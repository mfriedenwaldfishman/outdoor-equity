---
title: "Data Cleaning"
author: "Clarissa Boyajian and Halina Do-Linh"
date: "1/24/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(janitor)
library(tidycensus)

# file path from .Rproj to outdoorequity shared folder
outdoorequity_folder_file_path <- here::here("../../../../capstone/outdoorequity/")
```

# Bring in RIDB Data

## Set up

```{r}
# read in functions created in R script
source("functions/function_data-subsetting-pre2018.R")
source("functions/function_data-subsetting-post2019.R")
```

```{r}
# 2018
RIDB_cleaning_pre2018(full_file_path = paste0(outdoorequity_folder_file_path, "data/reservations2018.csv"), 
                      state_abbrev = "CA", df_name = "ridb_2018")
```

## Standardizing values

Notes on standardizations to consider:
- region description: 
    - change "-FS" and "- FS" to "Forest Service"
    - add indicator to regions without (i.e. not USFS or NPS)
- parent location:
    - change "-FS" and "- FS" to "Forest Service"
    - change "NF" to "National Forest"
    - change "PWR" to "Pacific West Region"
- park:
    - remove "--- #idcodehere#", and " (CA)" from ends of park names
    - fix anomolies that don't follow pattern (i.e. "region / campground name" or "campground name, region")
    - remove all uppercase
- facility zip:
    - remove everything after 5th digit
    - 108309 NAs
- start date:
    - min: 2017-06-19
    - max: 2019-09-30
- end date:
    - min: 2017-06-22
    - max: 2019-10-14
- order date: **the data is split by fiscal year of order date!!**
    - min: 2017-10-01
    - max: 2018-09-30

```{r}

```


# Bring in Census Data

## Set up

```{r}
census_api <- source("api_keys/census_api_key.R")
census_api_key(key = census_api, install = TRUE)
```

```{r}
acs5_variables <- load_variables(year = 2019, dataset = "acs5")

acs_2019 <- get_acs(geography = "zip code tabulation are",
                    year = "2019",
                    variables = c("B01003_001", #TOTAL POPULATION - Estimate!!Total
                                  "B02001_002", #RACE - Estimate!!Total:!!White alone
                                  "B02001_003", #RACE - Estimate!!Total:!!Black or African American alone
                                  "B02001_004", #RACE - Estimate!!Total:!!American Indian and Alaska Native alone
                                  "B02001_005", #RACE - Estimate!!Total:!!Asian alone
                                  "B02001_006", #RACE - Estimate!!Total:!!Native Hawaiian and Other Pacific Islander alone
                                  "B02001_007", #RACE - Estimate!!Total:!!Some other race alone
                                  "B02001_008", #RACE - Estimate!!Total:!!Two or more races
                                  "B02001_009", #RACE - Estimate!!Total:!!Two or more races:!!Two races including Some other race
                                  "B02001_010", #RACE - Estimate!!Total:!!Two or more races:!!Two races excluding Some other race,                                                         and three or more races
                                  ""
                                  ))
```



