---
title: "Data Cleaning"
author: "Clarissa Boyajian and Halina Do-Linh"
date: "1/24/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(here)
library(janitor)
library(tidycensus)

# file path from .Rproj to outdoorequity shared folder
outdoorequity_folder_file_path <- here::here("../../../../capstone/outdoorequity/")
```

# Bring in RIDB Data

## Set up

```{r}
# read in functions created in R script
source("functions/function_data-subsetting-pre2018.R")
source("functions/function_data-subsetting-post2019.R")
```

```{r}
# 2018
RIDB_cleaning_pre2018(full_file_path = paste0(outdoorequity_folder_file_path, "data/reservations2018.csv"), 
                      state_abbrev = "CA", df_name = "ridb_2018")
```

## Standardizing values

Notes on standardizations to consider:
- region description: 
    - change "-FS" and "- FS" to "Forest Service"
    - add indicator to regions without (i.e. not USFS or NPS)
- parent location:
    - change "-FS" and "- FS" to "Forest Service"
    - change "NF" to "National Forest"
    - change "PWR" to "Pacific West Region"
- park:
    - remove "--- #idcodehere#", and " (CA)" from ends of park names
    - fix anomolies that don't follow pattern (i.e. "region / campground name" or "campground name, region")
    - remove all uppercase
- facility zip:
    - remove everything after 5th digit
    - 108309 NAs
- start date:
    - min: 2017-06-19
    - max: 2019-09-30
- end date:
    - min: 2017-06-22
    - max: 2019-10-14
- order date: **the data is split by fiscal year of order date!!**
    - min: 2017-10-01
    - max: 2018-09-30

```{r}

```


# Bring in Census Data

## Set up

```{r}
census_api <- source("api_keys/census_api_key.R")
census_api_key(key = census_api, install = TRUE)
```

```{r}
acs5_variables <- load_variables(year = 2019, dataset = "acs5")

acs_2019 <- get_acs(geography = "zip code tabulation are",
                    year = "2019",
                    variables = c(
                        ## RACE ##
                        "B02001_001", #Estimate!!Total:
                        "B02001_002", # Estimate!!Total:!!White alone
                        "B02001_003", # Estimate!!Total:!!Black or African American alone
                        "B02001_004", # Estimate!!Total:!!American Indian and Alaska Native alone
                        "B02001_005", # Estimate!!Total:!!Asian alone
                        "B02001_006", # Estimate!!Total:!!Native Hawaiian and Other Pacific Islander alone
                        "B02001_007", # Estimate!!Total:!!Some other race alone
                        "B02001_008", # Estimate!!Total:!!Two or more races
                        ## MEANS OF TRANSPORTATION TO WORK BY VEHICLES AVAILABLE ##
                        "B08141_001", #Estimate!!Total:
                        "B08141_002", # Estimate!!Total:!!No vehicle available
                        ## EDUCATIONAL ATTAINMENT FOR THE POPULATION 25 YEARS AND OVER ##
                        "B15003_001", # Estimate!!Total:
                        "B15003_002", "B15003_003",  "B15003_004", "B15003_005", 
                        "B15003_006", "B15003_007", "B15003_008", "B15003_009",
                        "B15003_010", "B15003_011", "B15003_012", "B15003_013",
                        "B15003_014", "B15003_015", "B15003_016", "B15003_017",
                        "B15003_018", # Estimate!!Total:!!GED or alternative credential or below
                        "B15003_019", "B15003_020", # Estimate!!Total:!!Some college
                        "B15003_021", "B15003_022", # Estimate!!Total:!!Associates or bachelors degree
                        "B15003_023", "B15003_024", "B15003_025", # Estimate!!Total:!!Masters degree and above
                        ## HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2019 INFLATION-ADJUSTED DOLLARS) ##
                        "B19001_001", # Estimate!!Total:
                        "B19001_002", # Estimate!!Total:!!Less than $10,00 (spread of ranges change from -002 to -0017)
                        "B19001_017", # Estimate!!Total:!!$200,000 or more
                        ## MEDIAN HOUSEHOLD INCOME IN THE PAST 12 MONTHS (IN 2019 INFLATION-ADJUSTED DOLLARS) ##
                        "B19013_001", # Estimate!!Median household income in the past 12 months (in 2019 inflation-adjusted dollars)
                        ## PER CAPITA INCOME IN THE PAST 12 MONTHS (IN 2019 INFLATION-ADJUSTED DOLLARS) ##
                        "B19301_001", # Estimate!!Per capita income in the past 12 months (in 2019 inflation-adjusted dollars)
                        ## LANGUAGE SPOKEN AT HOME BY ABILITY TO SPEAK ENGLISH FOR THE POPULATION 5 YEARS AND OVER ##
                        # long list found here (https://data.census.gov/cedsci/table?d=ACS%205-Year%20Estimates%20Detailed%20Tables&tid=ACSDT5Y2019.B16001)
                                  ))
```




